"use strict";(self.webpackChunkhappy_mate=self.webpackChunkhappy_mate||[]).push([[216],{24216:(a,s,e)=>{e.r(s),e.d(s,{default:()=>f});var t=e(72791),r=e(64880),o=e(55294),c=e(91523),l=e(75660),n=e(56674),d=(e(66070),e(72426)),i=e.n(d),h=e(98472),m=e(61270),p=e(43464),D=e(49037),u=e(18775),g=e(63009),x=e(39773),j=e(28755),N=e(19127),b=e(46724),w=e(55211),v=e(94938),y=e(80184);class Z extends t.Component{constructor(a){super(a),this.CustomCard=a=>{let{label:s,user:e}=a;var t="success";return("\ubbf8\uce21\uc815"===e.hrData||"\ubbf8\uce21\uc815"===e.spo2Data||e.hrData<0||e.spo2Data<0)&&(t="secondary"),(e.hrData>=0&&e.hrData<=70||e.spo2Data>=0&&e.spo2Data<=94)&&(t="warning"),(e.hrData>=0&&(e.hrData<=60||e.hrData>110)||e.spo2Data>=0&&e.spo2Data<=90)&&(t="danger"),(0,y.jsxs)(p.Z,{color:t,className:"horizontal-card",children:[(0,y.jsx)(D.Z,{className:"mb-0 p-1",children:(0,y.jsx)("p",{className:"text-white mb-0",children:s})}),(0,y.jsx)(C,{selectedUser:e})]})},this.CustomProgressLabels=a=>{var s=0,e=0,t=0,r=0;return(0,y.jsxs)("div",{children:[this.state.userData.map(((a,o)=>{var c="success";("\ubbf8\uce21\uc815"===a.hrData||"\ubbf8\uce21\uc815"===a.spo2Data||a.hrData<0||a.spo2Data<0)&&(c="secondary"),(a.hrData>=0&&a.hrData<=70||a.spo2Data>=0&&a.spo2Data<=94)&&(c="warning"),(a.hrData>=0&&(a.hrData<=60||a.hrData>110)||a.spo2Data>=0&&a.spo2Data<=90)&&(c="danger"),"success"===c?t++:"secondary"===c?r++:"warning"===c?e++:"danger"===c&&s++})),(0,y.jsxs)("p",{className:"mb-0",children:["\uc804\uccb4 \uc0ac\uc6a9\uc790 \uac74\uac15 \uc0c1\ud0dc(\uc804\uccb4 ",t+s+e+r,"\uba85)"]}),(0,y.jsxs)(u.Z,{className:"progress-bar-rounded",multi:"multi",children:[(0,y.jsxs)(u.Z,{animated:"animated",bar:"bar",color:"success",value:t/(t+s+e+r)*100,children:["\uc591\ud638 ",Math.round(t/(t+s+e+r)*100),"% (",t,"\uba85)"]}),(0,y.jsxs)(u.Z,{className:"text-white",animated:"animated",bar:"bar",color:"warning",value:e/(t+s+e+r)*100,children:["\uc8fc\uc758 ",Math.round(e/(t+s+e+r)*100),"% (",e,"\uba85)"]}),(0,y.jsxs)(u.Z,{animated:"animated",bar:"bar",color:"danger",value:s/(t+s+e+r)*100,children:["\uc704\ud5d8 ",Math.round(s/(t+s+e+r)*100),"% (",s,"\uba85)"]}),(0,y.jsxs)(u.Z,{animated:"animated",bar:"bar",color:"secondary",value:r/(t+s+e+r)*100,children:["\ubbf8\uce21\uc815 ",Math.round(r/(t+s+e+r)*100),"% (",r,"\uba85)"]})]}),(0,y.jsx)("div",{className:"boader-dark-gray mt-2"})]})},this.handleSortButtonClick=()=>{this.setState((a=>({sortAscending:!a.sortAscending,sortBy:"level"})))},this.handleSortByName=()=>{this.setState((a=>({sortNameAscending:!a.sortNameAscending,sortBy:"Name"})))},this.handleDownloadButtonClick=()=>{const{downloading:a,userData:s}=this.state;1==a||(this.setState((a=>({downloading:!a.downloading}))),console.log("searchData : start"),this.searchData(s))},this.state={userData:[],sortAscending:!0,sortBy:"level",sortNameAscending:!0,downloading:!1,download_data1:[],complete_download:!1}}componentDidMount(){this.loadData()}componentDidUpdate(){}async loadData(){o.Z.get("https://api.ssirc.dev/api/User/").then((a=>{const s=[];Promise.all(a.data.map((a=>{const e={...a,hrData:"\ubbf8\uce21\uc815",spo2Data:"\ubbf8\uce21\uc815",abnormalHrData:"\ubbf8\uce21\uc815",stressData:"\ubbf8\uce21\uc815",depressData:"\ubbf8\uce21\uc815",stepData:"\ubbf8\uce21\uc815",recoveryData:"\ubbf8\uce21\uc815"};s.push(e)}))).then((()=>{this.setState({userData:s}),this.updatePagination(s)}))})).catch((a=>console.error("Error fetching userData",a)))}updatePagination(a){console.log("data.length : "+a.length);let s=0;for(let e=1;e<a.length/10+1;e++)console.log("currentPage : "+e),o.Z.get("https://test.ssirc.dev/Userprofile/paged/?page="+e).then((e=>{Promise.all(e.data.results.map((s=>{a.forEach((a=>{if(a.User_id==s.User_id){var e=s.Hr[s.Hr.length-1],t=s.Spo2[s.Spo2.length-1],r=s.Stress[s.Stress.length-1],o=s.Depress[s.Depress.length-1],c=s.Abnormal_hr[s.Abnormal_hr.length-1],l=s.Step[s.Step.length-1],n="";e=e?e.Hr:"\ubbf8\uce21\uc815",t=t?t.Spo2:"\ubbf8\uce21\uc815",r=r?!0===r.Abnormal_hr?"Y":"N":"\ubbf8\uce21\uc815",o=o?!0===o.Stress?"Y":"N":"\ubbf8\uce21\uc815",c=c?c.Depress:"\ubbf8\uce21\uc815",l=l?l.Step:"\ubbf8\uce21\uc815",3===c?c="\uc2ec\uac01":2===c?c="\uc911\uc99d\ub3c4":1===c?c="\uacbd\ub3c4":0===c&&(c="\uc815\uc0c1"),2===(n=n?n.Recovery:"\ubbf8\uce21\uc815")?n="\ub192\uc74c":1===n?n="\ubcf4\ud1b5":0===n&&(n="\ub0ae\uc74c"),s.Gps_location=s.Gps_location?s.Gps_location:"no-idea",a.hrData=e,a.spo2Data=t,a.abnormalHrData=r,a.stressData=o,a.depressData=c,a.stepData=l,a.recoveryData=n}}))}))).then((()=>{s++,this.setState({userData:a}),s>a.length/10&&this.searchData(a)})).finally((()=>{}))})).catch((a=>console.error("Error fetching userData",a)))}async searchData(a){let s=[["Time Stamp","Name","Data Type","Value"]];const e=a[a.length-1].User_id,t=(0,m.Z)(new Date,"yyyy-MM");a.forEach((a=>{Promise.all([o.Z.get("https://test.ssirc.dev/search/Hr/Ts/"+a.User_id+"/?search="+t),o.Z.get("https://test.ssirc.dev/search/Spo2/Ts/"+a.User_id+"/?search="+t)]).then((t=>{let[r,o]=t;r.data.length>0&&r.data.map((e=>{const t=[e.Ts,a.Name,"\uc2ec\ubc15\uc218",e.Hr];s.push(t)})),o.data.length>0&&o.data.map((e=>{const t=[e.Ts,a.Name,"\uc0b0\uc18c\ud3ec\ud654\ub3c4",e.Spo2];s.push(t)})),a.User_id==e&&(console.log("userResponse : "+a.Name),this.setState((a=>({downloading:!a.downloading,complete_download:!a.complete_download,download_data1:s}))))})).catch((s=>console.error("Error fetching data for user ".concat(a.User_id),s)))}))}render(){const{sortBy:a,sortAscending:s,sortNameAscending:e,download_data1:r,complete_download:o}=this.state,d=this.state.userData.slice().sort(((t,r)=>{if("Name"===a){const a=t.Name.toLowerCase(),s=r.Name.toLowerCase();return e?a.localeCompare(s):s.localeCompare(a)}const o={success:0,warning:1,danger:2,secondary:3},c=this.getColorLevel(t),l=this.getColorLevel(r),n=o[c]-o[l];return s?n:-n}));return(0,y.jsx)(t.Fragment,{children:(0,y.jsx)(l.Z,{children:(0,y.jsx)(n.Z,{component:"div",className:"TabsAnimation",appear:!0,timeout:0,enter:!1,exit:!1,children:(0,y.jsxs)("div",{className:"whole-page-ui",children:[(0,y.jsxs)(g.Z,{children:[(0,y.jsx)(x.Z,{className:"font-size-xxlarge vertical-center",children:"\uc804\uccb4 \uc0ac\uc6a9\uc790 \ubcf4\uae30"}),(0,y.jsx)(x.Z,{className:"font-size-small vertical-center horizontal-right",children:"Login > \uc0ac\uc6a9\uc790 \ud604\ud669 \uad00\ub9ac > \uc804\uccb4 \uc0ac\uc6a9\uc790 \ubcf4\uae30"})]}),(0,y.jsx)("div",{className:"space-10px"}),(0,y.jsx)("div",{className:"boader-black"}),(0,y.jsx)("div",{className:"space-20px"}),(0,y.jsxs)(g.Z,{className:"horizontal-right",children:[(0,y.jsx)(x.Z,{md:"1",className:"p-0 me-2p5",children:(0,y.jsxs)(p.Z,{className:"font-icon-wrapper",onClick:this.handleSortByName,children:[this.state.sortNameAscending?(0,y.jsx)("i",{className:"pe-7s-angle-down"}):(0,y.jsx)("i",{className:"pe-7s-angle-up"}),(0,y.jsx)("p",{children:"\uc774\ub984\uc815\ub82c"})]})}),(0,y.jsx)(x.Z,{md:"1",className:"p-0  me-2p5",children:(0,y.jsxs)(p.Z,{className:"font-icon-wrapper",onClick:this.handleSortButtonClick,children:[this.state.sortAscending?(0,y.jsx)("i",{className:"pe-7s-angle-down"}):(0,y.jsx)("i",{className:"pe-7s-angle-up"}),(0,y.jsx)("p",{children:"\uc704\ud5d8\ub3c4\uc815\ub82c"})]})}),(0,y.jsx)(x.Z,{md:"1",className:"p-0",children:(0,y.jsxs)(p.Z,{className:"font-icon-wrapper",children:[r.length>0?(0,y.jsx)("i",{className:"pe-7s-download"}):(0,y.jsx)("i",{className:"pe-7s-refresh-2"}),r.length>0?(0,y.jsx)(h.CSVLink,{data:r,filename:"\uc804\uccb4\uc0ac\uc6a9\uc790-".concat(i()().format("YYYYMMDD")),style:{textDecorationLine:"none"},children:(0,y.jsx)("p",{children:"\ub2e4\uc6b4\ub85c\ub4dc"})}):(0,y.jsx)("p",{children:"\uc900\ube44 \uc911"})]})}),(0,y.jsx)(x.Z,{md:"1",children:(0,y.jsx)(c.rU,{to:"../../Members/Basic/",children:(0,y.jsxs)(p.Z,{className:"font-icon-wrapper",children:[(0,y.jsx)("i",{className:"pe-7s-back"}),(0,y.jsx)("p",{children:"\ub3cc\uc544\uac00\uae30"})]})})})]}),(0,y.jsx)(g.Z,{children:(0,y.jsx)(x.Z,{className:"mb-3",children:(0,y.jsx)(this.CustomProgressLabels,{})})}),(0,y.jsx)(g.Z,{children:d.map((a=>(0,y.jsx)(x.Z,{md:2,className:"mb-3",children:(0,y.jsx)(this.CustomCard,{label:a.Name,user:a})},a.User_id)))})]})})})})}getColorLevel(a){var s="success";return("\ubbf8\uce21\uc815"===a.hrData||"\ubbf8\uce21\uc815"===a.spo2Data||a.hrData<0||a.spo2Data<0)&&(s="secondary"),(a.hrData>=0&&a.hrData<=70||a.spo2Data>=0&&a.spo2Data<=94)&&(s="warning"),(a.hrData>=0&&(a.hrData<=60||a.hrData>110)||a.spo2Data>=0&&a.spo2Data<=90)&&(s="danger"),s}}const _=(0,r.EN)(Z);class C extends t.Component{constructor(a){super(a),this.DetailInfoButton=a=>{let{user:s}=a;var e="success";return("\ubbf8\uce21\uc815"===s.hrData||"\ubbf8\uce21\uc815"===s.spo2Data||s.hrData<0||s.spo2Data<0)&&(e="secondary"),(s.hrData>=0&&s.hrData<=70||s.spo2Data>=0&&s.spo2Data<=94)&&(e="warning"),(s.hrData>=0&&(s.hrData<=60||s.hrData>110)||s.spo2Data>=0&&s.spo2Data<=90)&&(e="danger"),(0,y.jsxs)(g.Z,{className:"m-0",children:[(0,y.jsx)(x.Z,{className:"m-0 p-2",children:(0,y.jsx)(N.Z,{className:"text-white",style:{borderColor:"white"},color:e,onClick:this.toggle,children:"\uc694\uc57d"})}),(0,y.jsx)(x.Z,{className:"m-0 p-2",children:(0,y.jsx)(c.rU,{to:"../../Dashboards/basic/".concat(s.User_id),children:(0,y.jsx)(N.Z,{className:"text-white",style:{borderColor:"white"},color:e,children:"\ucc60\ud2b8"})})})]})},this.state={modal:!1},this.toggle=this.toggle.bind(this)}toggle(){console.log("toggle called!"),this.setState({modal:!this.state.modal})}render(){const{selectedUser:a}=this.props;var s="custom-color-success",e="custom-color-success",t="custom-color-success",r="custom-color-success",o="custom-color-success";return"\ubbf8\uce21\uc815"===a.hrData||a.hrData<0?s="custom-color-secondary":a.hrData<=70&&a.hrData>60?s="custom-color-warning":(a.hrData<=60||a.hrData>110)&&(s="custom-color-danger"),"\ubbf8\uce21\uc815"===a.spo2Data||a.spo2Data<0?e="custom-color-secondary":a.spo2Data<=94&&a.spo2Data>90?e="custom-color-warning":a.spo2Data<=90&&(e="custom-color-danger"),"\ubbf8\uce21\uc815"===a.stepData?t="custom-color-secondary":0===a.stepData&&(t="custom-color-danger"),"\ubbf8\uce21\uc815"===a.recoveryData?r="custom-color-secondary":"\ubcf4\ud1b5"===a.recoveryData?r="custom-color-warning":"\ub0ae\uc74c"===a.recoveryData&&(r="custom-color-danger"),"\ubbf8\uce21\uc815"===a.depressData?o="custom-color-secondary":"\uacbd\ub3c4"===a.depressData?o="custom-color-warning":"\uc2ec\uac01"!==a.depressData&&"\uc911\uc99d\ub3c4"!==a.depressData||(o="custom-color-danger"),(0,y.jsxs)("span",{className:"d-inline-block",children:[(0,y.jsx)(this.DetailInfoButton,{user:a}),(0,y.jsxs)(b.Z,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,backdrop:!0,children:[(0,y.jsx)(w.Z,{toggle:this.toggle,children:a&&"".concat(a.Name,"\ub2d8\uc758 \uc0c1\uc138\uc815\ubcf4")}),(0,y.jsx)(v.Z,{children:(0,y.jsx)(j.Z,{className:"mb-0",bordered:!0,children:(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"custom-table-color",children:"\uc774\ub984"}),(0,y.jsx)("td",{children:a.Name}),(0,y.jsx)("td",{className:"custom-table-color",children:"\uc544\uc774\ub514"}),(0,y.jsx)("td",{children:a.Id})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"custom-table-color",children:"\ud578\ub4dc\ud3f0\ubc88\ud638"}),(0,y.jsx)("td",{children:a.Hp_num}),(0,y.jsx)("td",{className:"custom-table-color",children:"\ubcf4\ud638\uc790 \ud578\ub4dc\ud3f0\ubc88\ud638"}),(0,y.jsx)("td",{children:a.Superv_hp_num})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"custom-table-color",children:"\uc2ec\ubc15\uc218"}),(0,y.jsx)("td",{className:s,children:a.hrData}),(0,y.jsx)("td",{className:"custom-table-color",children:"\uc0b0\uc18c\ud3ec\ud654\ub3c4"}),(0,y.jsx)("td",{className:e,children:a.spo2Data})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"custom-table-color",children:"\ud68c\ubcf5\ud0c4\ub825\uc131"}),(0,y.jsx)("td",{className:r,children:a.recoveryData}),(0,y.jsx)("td",{className:"custom-table-color",children:"\uc6b0\uc6b8\uc99d"}),(0,y.jsx)("td",{className:o,children:a.depressData})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"custom-table-color",children:"\uac78\uc74c\uc218"}),(0,y.jsx)("td",{className:t,children:a.stepData})]})]})})})]})]})}}const f=a=>{let{match:s}=a;return(0,y.jsx)(t.Fragment,{children:(0,y.jsx)("div",{className:"app-main",children:(0,y.jsx)("div",{className:"app-main__outer",children:(0,y.jsx)("div",{className:"app-main__inner",children:(0,y.jsx)(r.AW,{path:"".concat(s.url,"/Basic"),component:_})})})})})}},66070:()=>{}}]);
//# sourceMappingURL=216.9df05ced.chunk.js.map