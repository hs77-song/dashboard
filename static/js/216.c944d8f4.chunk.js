"use strict";(self.webpackChunkhappy_mate=self.webpackChunkhappy_mate||[]).push([[216],{24216:(a,s,e)=>{e.r(s),e.d(s,{default:()=>v});var t=e(72791),o=e(64880),l=e(55294),r=e(91523),n=e(75660),c=e(56674),d=(e(66070),e(72426),e(98472)),i=e(43464),h=e(49037),m=e(18775),p=e(63009),g=e(39773),u=e(28755),D=e(19127),x=e(46724),j=e(55211),w=e(94938),N=e(80184);class b extends t.Component{constructor(a){super(a),this.CustomCard=a=>{let{label:s,user:e}=a;var t="success";return("\ubbf8\uce21\uc815"===e.hrData||"\ubbf8\uce21\uc815"===e.spo2Data||e.hrData<0||e.spo2Data<0)&&(t="secondary"),(e.hrData>=0&&e.hrData<=70||e.spo2Data>=0&&e.spo2Data<=94)&&(t="warning"),(e.hrData>=0&&(e.hrData<=60||e.hrData>110)||e.spo2Data>=0&&e.spo2Data<=90)&&(t="danger"),(0,N.jsxs)(i.Z,{color:t,className:"horizontal-card",children:[(0,N.jsx)(h.Z,{className:"mb-0 p-1",children:(0,N.jsx)("p",{className:"text-white mb-0",children:s})}),(0,N.jsx)(C,{selectedUser:e})]})},this.CustomProgressLabels=a=>{var s=0,e=0,t=0,o=0;return(0,N.jsxs)("div",{children:[this.state.userData.map(((a,l)=>{var r="success";("\ubbf8\uce21\uc815"===a.hrData||"\ubbf8\uce21\uc815"===a.spo2Data||a.hrData<0||a.spo2Data<0)&&(r="secondary"),(a.hrData>=0&&a.hrData<=70||a.spo2Data>=0&&a.spo2Data<=94)&&(r="warning"),(a.hrData>=0&&(a.hrData<=60||a.hrData>110)||a.spo2Data>=0&&a.spo2Data<=90)&&(r="danger"),"success"===r?t++:"secondary"===r?o++:"warning"===r?e++:"danger"===r&&s++})),(0,N.jsxs)("p",{className:"mb-0",children:["\uc804\uccb4 \uc0ac\uc6a9\uc790 \uac74\uac15 \uc0c1\ud0dc(\uc804\uccb4 ",t+s+e+o,"\uba85)"]}),(0,N.jsxs)(m.Z,{className:"progress-bar-rounded",multi:"multi",children:[(0,N.jsxs)(m.Z,{animated:"animated",bar:"bar",color:"success",value:t/(t+s+e+o)*100,children:["\uc591\ud638 ",Math.round(t/(t+s+e+o)*100),"% (",t,"\uba85)"]}),(0,N.jsxs)(m.Z,{className:"text-white",animated:"animated",bar:"bar",color:"warning",value:e/(t+s+e+o)*100,children:["\uc8fc\uc758 ",Math.round(e/(t+s+e+o)*100),"% (",e,"\uba85)"]}),(0,N.jsxs)(m.Z,{animated:"animated",bar:"bar",color:"danger",value:s/(t+s+e+o)*100,children:["\uc704\ud5d8 ",Math.round(s/(t+s+e+o)*100),"% (",s,"\uba85)"]}),(0,N.jsxs)(m.Z,{animated:"animated",bar:"bar",color:"secondary",value:o/(t+s+e+o)*100,children:["\ubbf8\uce21\uc815 ",Math.round(o/(t+s+e+o)*100),"% (",o,"\uba85)"]})]}),(0,N.jsx)("div",{className:"boader-dark-gray mt-2"})]})},this.handleSortButtonClick=()=>{this.setState((a=>({sortAscending:!a.sortAscending,sortBy:"level"})))},this.handleSortByName=()=>{this.setState((a=>({sortNameAscending:!a.sortNameAscending,sortBy:"Name"})))},this.buttonReset=()=>{this.setState({downloadModalVisible:!1}),console.log("downloadModalVisibl(buttonReset) : "+this.state.downloadModalVisible)},this.handleDownloadButtonClick=()=>{this.setState((a=>({downloadModalVisible:!a.downloadModalVisible}))),console.log("downloadModalVisible(handleDownloadButtonClick) : "+this.state.downloadModalVisible),this.render()},this.state={userData:[],sortAscending:!0,sortBy:"level",sortNameAscending:!0,downloading:!1,download_data1:[],complete_download:!1,downloadModalVisible:!1}}componentDidMount(){this.loadData()}componentDidUpdate(){}async loadData(){l.Z.get("https://api.ssirc.dev/api/User/").then((a=>{const s=[];Promise.all(a.data.map((a=>{const e={...a,hrData:"\ubbf8\uce21\uc815",spo2Data:"\ubbf8\uce21\uc815",abnormalHrData:"\ubbf8\uce21\uc815",stressData:"\ubbf8\uce21\uc815",depressData:"\ubbf8\uce21\uc815",stepData:"\ubbf8\uce21\uc815",recoveryData:"\ubbf8\uce21\uc815"};s.push(e)}))).then((()=>{this.setState({userData:s}),this.updatePagination(s)}))})).catch((a=>console.error("Error fetching userData",a)))}updatePagination(a){console.log("data.length : "+a.length);for(let s=1;s<a.length/10+1;s++)console.log("currentPage : "+s),l.Z.get("https://test.ssirc.dev/Userprofile/paged/?page="+s).then((s=>{Promise.all(s.data.results.map((s=>{a.forEach((a=>{if(a.User_id==s.User_id){var e=s.Hr[s.Hr.length-1],t=s.Spo2[s.Spo2.length-1],o=s.Stress[s.Stress.length-1],l=s.Depress[s.Depress.length-1],r=s.Abnormal_hr[s.Abnormal_hr.length-1],n=s.Step[s.Step.length-1],c="";e=e?e.Hr:"\ubbf8\uce21\uc815",t=t?t.Spo2:"\ubbf8\uce21\uc815",o=o?!0===o.Abnormal_hr?"Y":"N":"\ubbf8\uce21\uc815",l=l?!0===l.Stress?"Y":"N":"\ubbf8\uce21\uc815",r=r?r.Depress:"\ubbf8\uce21\uc815",n=n?n.Step:"\ubbf8\uce21\uc815",3===r?r="\uc2ec\uac01":2===r?r="\uc911\uc99d\ub3c4":1===r?r="\uacbd\ub3c4":0===r&&(r="\uc815\uc0c1"),2===(c=c?c.Recovery:"\ubbf8\uce21\uc815")?c="\ub192\uc74c":1===c?c="\ubcf4\ud1b5":0===c&&(c="\ub0ae\uc74c"),s.Gps_location=s.Gps_location?s.Gps_location:"no-idea",a.hrData=e,a.spo2Data=t,a.abnormalHrData=o,a.stressData=l,a.depressData=r,a.stepData=n,a.recoveryData=c}}))}))).then((()=>{this.setState({userData:a})})).finally((()=>{}))})).catch((a=>console.error("Error fetching userData",a)))}render(){const{sortBy:a,sortAscending:s,sortNameAscending:e,download_data1:o,complete_download:l,downloadModalVisible:d}=this.state;console.log("[render] downloadModalVisible : "+this.state.downloadModalVisible);const h=this.state.userData.slice().sort(((t,o)=>{if("Name"===a){const a=t.Name.toLowerCase(),s=o.Name.toLowerCase();return e?a.localeCompare(s):s.localeCompare(a)}const l={success:0,warning:1,danger:2,secondary:3},r=this.getColorLevel(t),n=this.getColorLevel(o),c=l[r]-l[n];return s?c:-c}));return console.log("[render][return]downloadModalVisible: ",this.state.downloadModalVisible),(0,N.jsx)(t.Fragment,{children:(0,N.jsx)(n.Z,{children:(0,N.jsx)(c.Z,{component:"div",className:"TabsAnimation",appear:!0,timeout:0,enter:!1,exit:!1,children:(0,N.jsxs)("div",{className:"whole-page-ui",children:[(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(g.Z,{className:"font-size-xxlarge vertical-center",children:"\uc804\uccb4 \uc0ac\uc6a9\uc790 \ubcf4\uae30"}),(0,N.jsx)(g.Z,{className:"font-size-small vertical-center horizontal-right",children:"Login > \uc0ac\uc6a9\uc790 \ud604\ud669 \uad00\ub9ac > \uc804\uccb4 \uc0ac\uc6a9\uc790 \ubcf4\uae30"})]}),(0,N.jsx)("div",{className:"space-10px"}),(0,N.jsx)("div",{className:"boader-black"}),(0,N.jsx)("div",{className:"space-20px"}),(0,N.jsxs)(p.Z,{className:"horizontal-right",children:[(0,N.jsx)(g.Z,{md:"1",className:"p-0 me-1p5",children:(0,N.jsxs)(D.Z,{color:"alternate",className:"font-icon-wrapper m-0 px-3 py-0",onClick:this.handleSortByName,children:[this.state.sortNameAscending?(0,N.jsx)("i",{className:"pe-7s-angle-down"}):(0,N.jsx)("i",{className:"pe-7s-angle-up"}),(0,N.jsx)("p",{children:"\uc774\ub984\uc815\ub82c"})]})}),(0,N.jsx)(g.Z,{md:"1",className:"p-0  m-0",children:(0,N.jsxs)(D.Z,{color:"alternate",className:"font-icon-wrapper m-0 px-2 py-0",onClick:this.handleSortButtonClick,children:[this.state.sortAscending?(0,N.jsx)("i",{className:"pe-7s-angle-down"}):(0,N.jsx)("i",{className:"pe-7s-angle-up"}),(0,N.jsx)("p",{children:"\uc704\ud5d8\ub3c4\uc815\ub82c"})]})}),(0,N.jsx)(g.Z,{md:"1",className:"p-0  m-0",children:(0,N.jsx)(i.Z,{className:"font-icon-wrapper",children:(0,N.jsx)(Z,{user:this.state.userData})})}),(0,N.jsx)(g.Z,{md:"1",children:(0,N.jsx)(r.rU,{to:"../../Members/Basic/",children:(0,N.jsxs)(D.Z,{color:"alternate",className:"font-icon-wrapper m-0 px-1 py-0",children:[(0,N.jsx)("i",{className:"pe-7s-back"}),(0,N.jsx)("p",{children:"\ub3cc\uc544\uac00\uae30"})]})})})]}),(0,N.jsx)(p.Z,{children:(0,N.jsx)(g.Z,{className:"mb-3",children:(0,N.jsx)(this.CustomProgressLabels,{})})}),(0,N.jsx)(p.Z,{children:h.map((a=>(0,N.jsx)(g.Z,{md:2,className:"mb-3",children:(0,N.jsx)(this.CustomCard,{label:a.Name,user:a})},a.User_id)))})]})})})})}getColorLevel(a){var s="success";return("\ubbf8\uce21\uc815"===a.hrData||"\ubbf8\uce21\uc815"===a.spo2Data||a.hrData<0||a.spo2Data<0)&&(s="secondary"),(a.hrData>=0&&a.hrData<=70||a.spo2Data>=0&&a.spo2Data<=94)&&(s="warning"),(a.hrData>=0&&(a.hrData<=60||a.hrData>110)||a.spo2Data>=0&&a.spo2Data<=90)&&(s="danger"),s}}const y=(0,o.EN)(b);class C extends t.Component{constructor(a){super(a),this.DetailInfoButton=a=>{let{user:s}=a;var e="success";return("\ubbf8\uce21\uc815"===s.hrData||"\ubbf8\uce21\uc815"===s.spo2Data||s.hrData<0||s.spo2Data<0)&&(e="secondary"),(s.hrData>=0&&s.hrData<=70||s.spo2Data>=0&&s.spo2Data<=94)&&(e="warning"),(s.hrData>=0&&(s.hrData<=60||s.hrData>110)||s.spo2Data>=0&&s.spo2Data<=90)&&(e="danger"),(0,N.jsxs)(p.Z,{className:"m-0",children:[(0,N.jsx)(g.Z,{className:"m-0 p-2",children:(0,N.jsx)(D.Z,{className:"text-white",style:{borderColor:"white"},color:e,onClick:this.toggle,children:"\uc694\uc57d"})}),(0,N.jsx)(g.Z,{className:"m-0 p-2",children:(0,N.jsx)(r.rU,{to:"../../Dashboards/basic/".concat(s.User_id),children:(0,N.jsx)(D.Z,{className:"text-white",style:{borderColor:"white"},color:e,children:"\ucc60\ud2b8"})})})]})},this.state={modal:!1},this.toggle=this.toggle.bind(this)}toggle(){console.log("toggle called!"),this.setState({modal:!this.state.modal})}render(){const{selectedUser:a}=this.props;var s="custom-color-success",e="custom-color-success",t="custom-color-success",o="custom-color-success",l="custom-color-success";return"\ubbf8\uce21\uc815"===a.hrData||a.hrData<0?s="custom-color-secondary":a.hrData<=70&&a.hrData>60?s="custom-color-warning":(a.hrData<=60||a.hrData>110)&&(s="custom-color-danger"),"\ubbf8\uce21\uc815"===a.spo2Data||a.spo2Data<0?e="custom-color-secondary":a.spo2Data<=94&&a.spo2Data>90?e="custom-color-warning":a.spo2Data<=90&&(e="custom-color-danger"),"\ubbf8\uce21\uc815"===a.stepData?t="custom-color-secondary":0===a.stepData&&(t="custom-color-danger"),"\ubbf8\uce21\uc815"===a.recoveryData?o="custom-color-secondary":"\ubcf4\ud1b5"===a.recoveryData?o="custom-color-warning":"\ub0ae\uc74c"===a.recoveryData&&(o="custom-color-danger"),"\ubbf8\uce21\uc815"===a.depressData?l="custom-color-secondary":"\uacbd\ub3c4"===a.depressData?l="custom-color-warning":"\uc2ec\uac01"!==a.depressData&&"\uc911\uc99d\ub3c4"!==a.depressData||(l="custom-color-danger"),(0,N.jsxs)("span",{className:"d-inline-block",children:[(0,N.jsx)(this.DetailInfoButton,{user:a}),(0,N.jsxs)(x.Z,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className,backdrop:!0,children:[(0,N.jsx)(j.Z,{toggle:this.toggle,children:a&&"".concat(a.Name,"\ub2d8\uc758 \uc0c1\uc138\uc815\ubcf4")}),(0,N.jsx)(w.Z,{children:(0,N.jsx)(u.Z,{className:"mb-0",bordered:!0,children:(0,N.jsxs)("tbody",{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"custom-table-color",children:"\uc774\ub984"}),(0,N.jsx)("td",{children:a.Name}),(0,N.jsx)("td",{className:"custom-table-color",children:"\uc544\uc774\ub514"}),(0,N.jsx)("td",{children:a.Id})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"custom-table-color",children:"\ud578\ub4dc\ud3f0\ubc88\ud638"}),(0,N.jsx)("td",{children:a.Hp_num}),(0,N.jsx)("td",{className:"custom-table-color",children:"\ubcf4\ud638\uc790 \ud578\ub4dc\ud3f0\ubc88\ud638"}),(0,N.jsx)("td",{children:a.Superv_hp_num})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"custom-table-color",children:"\uc2ec\ubc15\uc218"}),(0,N.jsx)("td",{className:s,children:a.hrData}),(0,N.jsx)("td",{className:"custom-table-color",children:"\uc0b0\uc18c\ud3ec\ud654\ub3c4"}),(0,N.jsx)("td",{className:e,children:a.spo2Data})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"custom-table-color",children:"\ud68c\ubcf5\ud0c4\ub825\uc131"}),(0,N.jsx)("td",{className:o,children:a.recoveryData}),(0,N.jsx)("td",{className:"custom-table-color",children:"\uc6b0\uc6b8\uc99d"}),(0,N.jsx)("td",{className:l,children:a.depressData})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"custom-table-color",children:"\uac78\uc74c\uc218"}),(0,N.jsx)("td",{className:t,children:a.stepData})]})]})})})]})]})}}class Z extends t.Component{constructor(a){super(a),this.handleDownloadButtonClick=()=>{const{user:a}=this.props,{downloading:s,dayCount:e,monthCount:t}=this.state;!0===s||(this.setState((a=>({downloading:!a.downloading}))),this.setState({download_data1:[]},(()=>{this.searchData(a,e,t)}))),console.log("[handleDownloadButtonClick]downloading : "+s)},this.state={downloadModal:!1,year:0,month:0,day:0,dayCount:0,monthCount:0,downloading:!0,download_data1:[],complete_download:!1},this.toggle=this.toggle.bind(this),console.log("[DownloadModal] !!");const{user:s}=this.props}toggle(){console.log("download modal toggle called!");const{user:a}=this.props,{dayCount:s,monthCount:e}=this.state;this.setState((a=>({downloadModal:!a.downloadModal,download_data1:[]}))),this.searchData(a,s,e),console.log("[toggle]downloadModal: ",this.state.downloadModal)}async searchData(a,s,e){let t=[["Time Stamp","Name","Data Type","Value"]];var o=new Date,r=o.getFullYear(),n=("0"+(o.getMonth()+1)).slice(-2),c=("0"+o.getDate()).slice(-2);console.log("date(today) : "+r+" "+n+" "+c),console.log("chartView1 : "+this.state.chartView1+", chartView2 : "+this.state.chartView2),console.log("monthCount : "+e+", dayCount : "+s);var d=new Date(o);d.setDate(o.getDate()+s+30*e),r=d.getFullYear(),n=("0"+(d.getMonth()+1)).slice(-2),c=("0"+d.getDate()).slice(-2),console.log("date(selected) : "+r+" "+n+" "+c),this.setState({year:r,month:n,day:c}),console.log("searchData! "+r+"\ub144 "+n+"\uc6d4");const i=a[a.length-1].User_id;console.log("download_data1 : "+this.state.download_data1),a.forEach((a=>{Promise.all([l.Z.get("https://test.ssirc.dev/search/Hr/Ts/"+a.User_id+"/?search="+r+"-"+n),l.Z.get("https://test.ssirc.dev/search/Spo2/Ts/"+a.User_id+"/?search="+r+"-"+n)]).then((s=>{let[e,o]=s;e.data.length>0&&e.data.map((s=>{const e=[s.Ts,a.Name,"\uc2ec\ubc15\uc218",s.Hr];t.push(e)})),o.data.length>0&&o.data.map((s=>{const e=[s.Ts,a.Name,"\uc0b0\uc18c\ud3ec\ud654\ub3c4",s.Spo2];t.push(e)})),a.User_id===i&&(console.log("userResponse : "+a.Name),this.setState((a=>({downloading:!a.downloading,complete_download:!a.complete_download,download_data1:t}))),console.log("[searchData]downloading : "+this.state.downloading+" complete_download : "+this.state.complete_download))})).catch((s=>console.error("Error fetching data for user ".concat(a.User_id),s)))}))}toggleChartView2(a){const{user:s}=this.props,{downloading:e}=this.state;var t=0,o=0;!0===e||("-1month"===a?(o=this.state.monthCount-1,t=this.state.dayCount):"+1month"===a&&(o=this.state.monthCount+1,t=this.state.dayCount),this.setState((a=>({downloading:!a.downloading}))),this.setState({dayCount:t,monthCount:o,download_data1:[]},(()=>{this.searchData(s,t,o)}))),console.log("[toggleChartView2]downloading : "+e)}render(){let{year:a,month:s,download_data1:e,complete_download:t,dayCount:o,monthCount:l}=this.state;if(0===a){var r=new Date;a=r.getFullYear(),s=("0"+(r.getMonth()+1)).slice(-2)}return(0,N.jsxs)("span",{className:"d-inline-block",children:[(0,N.jsxs)(D.Z,{color:"alternate",className:"font-icon-wrapper m-0 px-3 py-0",md:1,onClick:this.toggle,children:[(0,N.jsx)("i",{className:"pe-7s-download"}),(0,N.jsx)("p",{children:"\ub2e4\uc6b4\ub85c\ub4dc"})]}),(0,N.jsxs)(x.Z,{isOpen:this.state.downloadModal,toggle:this.toggle,className:this.props.className,backdrop:!0,children:[(0,N.jsx)(j.Z,{toggle:this.toggle,children:"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \ub2e4\uc6b4\ub85c\ub4dc "}),(0,N.jsxs)(w.Z,{children:[(0,N.jsx)(p.Z,{className:"mb-2",children:(0,N.jsx)(g.Z,{className:"horizontal-center font-size-large",children:"".concat(a,"\ub144 ").concat(s,"\uc6d4")})}),(0,N.jsxs)(p.Z,{className:"mb-1 horizontal-center",children:[(0,N.jsx)(g.Z,{md:"2",children:(0,N.jsx)(D.Z,{style:{width:"100%"},color:"secondary",onClick:()=>this.toggleChartView2("-1month"),children:(0,N.jsx)("i",{className:"lnr-chevron-left"})})}),(0,N.jsx)(g.Z,{md:"3",className:"vertical-center",children:(0,N.jsx)(D.Z,{style:{width:"100%"},className:"p-1p5",color:"secondary",onClick:()=>this.handleDownloadButtonClick(),children:e.length>0?(0,N.jsx)(d.CSVLink,{data:e,filename:"\uc804\uccb4\uc0ac\uc6a9\uc790-".concat(a,"\ub144").concat(s,"\uc6d4"),children:(0,N.jsx)("p",{className:"m-0",style:{color:"white"},children:"\ub2e4\uc6b4\ub85c\ub4dc"})}):(0,N.jsx)("p",{className:"m-0",style:{color:"white"},children:"\uc900\ube44 \uc911"})})}),(0,N.jsx)(g.Z,{md:"2",children:(0,N.jsx)(D.Z,{style:{width:"100%"},color:"secondary",onClick:()=>this.toggleChartView2("+1month"),children:(0,N.jsx)("i",{className:"lnr-chevron-right"})})})]})]})]})]})}}const v=a=>{let{match:s}=a;return(0,N.jsx)(t.Fragment,{children:(0,N.jsx)("div",{className:"app-main",children:(0,N.jsx)("div",{className:"app-main__outer",children:(0,N.jsx)("div",{className:"app-main__inner",children:(0,N.jsx)(o.AW,{path:"".concat(s.url,"/Basic"),component:y})})})})})}},66070:()=>{}}]);
//# sourceMappingURL=216.c944d8f4.chunk.js.map