"use strict";(self.webpackChunkhappy_mate=self.webpackChunkhappy_mate||[]).push([[795],{21795:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(72791),n=s(64880),l=s(75660),o=s(56674),r=(s(66070),s(91523)),d=s(55294),c=(s(72426),s(98472)),i=s(19127),h=s(63009),m=s(39773),p=s(28755),g=s(47768),x=s(81296),u=s(74463),j=s(54275),w=s(76167),D=s(8118),y=s(43464),S=s(3206),N=s(70285),Z=s(9070),_=s(46724),C=s(55211),b=s(94938),f=s(80184);class v extends a.Component{constructor(){super(),this.checkProps=()=>{"yes"===this.props.match.params.returned&&(this.setState({searchKeyword:this.props.match.params.searchKeyword}),this.setState({selectedItem:this.props.match.params.selectedItem}),"null"===this.props.match.params.searchKeyword&&this.setState({searchKeyword:""}),this.handleSearch())},this.handleDropdownItemSelect=e=>{this.setState({selectedItem:e})},this.DetailButton=e=>{let{label:t}=e;return(0,f.jsx)(i.Z,{style:{paddingTop:"3px",paddingBottom:"3px",paddingLeft:"15px",paddingRight:"15px",margin:"0px",width:"100%"},children:t})},this.handleSearch=()=>{const{userDataStore:e,searchKeyword:t,selectedItem:s}=this.state;console.log("[handleSearch] userDataStore : "+e),console.log("[handleSearch] searchKeyword : "+t);const a=[...this.state.userDataStore];if(a){const e=a.filter((e=>s.includes("\uc774\ub984")&&e.Name.includes(t)||s.includes("\uc804\ud654\ubc88\ud638")&&e.Hp_num.includes(t)||s.includes("\uc544\uc774\ub514")&&e.Id.includes(t)));this.setState({currentPage:1,userData:e})}},this.SearchButton=e=>{let{label:t}=e;return console.log("search button!"),(0,f.jsx)(i.Z,{color:"secondary",style:{width:"100%"},onClick:this.handleSearch,children:t})},this.state={userData:[],currentPage:1,searchKeyword:"",itemsPerPage:10,selectedItem:"\uc544\uc774\ub514",userDataStore:[]}}updatePagination(e){const{currentPage:t}=this.state;console.log("data.length : "+e.length);for(let s=1;s<e.length/10+1;s++)console.log("currentPage : "+s),d.Z.get("https://test.ssirc.dev/Userprofile/paged/?page="+s).then((t=>{Promise.all(t.data.results.map((t=>{e.forEach((e=>{if(e.User_id==t.User_id){var s=t.Hr[t.Hr.length-1],a=t.Spo2[t.Spo2.length-1],n=t.Stress[t.Stress.length-1],l=t.Depress[t.Depress.length-1],o=t.Abnormal_hr[t.Abnormal_hr.length-1],r=t.Step[t.Step.length-1];s=s?s.Hr:"\ubbf8\uce21\uc815",a=a?a.Spo2:"\ubbf8\uce21\uc815",n=n?!0===n.Abnormal_hr?"Y":"N":"\ubbf8\uce21\uc815",l=l?l.Stress:"\ubbf8\uce21\uc815",o=o?o.Depress:"\ubbf8\uce21\uc815",r=r?r.Step:"\ubbf8\uce21\uc815",3===o?o="\uc2ec\uac01":2===o?o="\uc911\uc99d\ub3c4":1===o?o="\uacbd\ub3c4":0===o&&(o="\uc815\uc0c1"),t.Gps_location=t.Gps_location?t.Gps_location:"no-idea",e.hrData=s,e.spo2Data=a,e.abnormalHrData=n,e.stressData=l,e.depressData=o,e.stepData=r}}))}))).then((()=>{this.setState({userDataStore:e})})).finally((()=>{}))})).catch((e=>console.error("Error fetching userData",e)))}componentDidMount(){this.checkProps(),this.loadData()}async loadData(){d.Z.get("https://api.ssirc.dev/api/User/").then((e=>{const t=[];Promise.all(e.data.map((e=>{const s={...e,hrData:"\ubbf8\uce21\uc815",spo2Data:"\ubbf8\uce21\uc815",abnormalHrData:"\ubbf8\uce21\uc815",stressData:"\ubbf8\uce21\uc815",depressData:"\ubbf8\uce21\uc815",stepData:"\ubbf8\uce21\uc815"};t.push(s)}))).then((()=>{this.setState({userData:t}),console.log("userData with additional data: ",t),this.setState({userDataStore:t}),console.log("userDataStore with additional data: ",t);const e=this.props.match.params.returned,s=this.props.match.params.searchKeyword,a=this.props.match.params.selectedItem;if("yes"===e&&"null"!==s){const e=t.filter((e=>a.includes("\uc774\ub984")&&e.Name.includes(s)||a.includes("\uc804\ud654\ubc88\ud638")&&e.Hp_num.includes(s)||a.includes("\uc544\uc774\ub514")&&e.Id.includes(s)));this.setState({currentPage:1,userData:e})}this.updatePagination(t)}))})).catch((e=>console.error("Error fetching userData",e)))}render(){const{userData:e,currentPage:t,searchKeyword:s,itemsPerPage:n,selectedItem:d}=this.state,c=Math.ceil(e.length/n),_=t*n,C=_-n,b=e.slice(C,_),v=e=>{this.setState({currentPage:e})};let P=s;return""===P&&(P=null),(0,f.jsx)(a.Fragment,{children:(0,f.jsx)(l.Z,{children:(0,f.jsx)(o.Z,{component:"div",className:"TabsAnimation",appear:!0,timeout:0,enter:!1,exit:!1,children:(0,f.jsxs)("div",{className:"whole-page-ui",children:[(0,f.jsxs)(h.Z,{children:[(0,f.jsx)(m.Z,{children:(0,f.jsxs)("p",{className:"mb-0",children:[(0,f.jsx)("span",{className:"font-size-xxlarge mx-2",children:"\ub098\uc8fc\uc2dc"}),(0,f.jsx)("span",{className:"font-size-xlarge",children:"\uac74\uac15 \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c"})]})}),(0,f.jsx)(m.Z,{className:"font-size-small vertical-center horizontal-right",children:"Login > \uc0ac\uc6a9\uc790 \ud604\ud669 \uad00\ub9ac"})]}),(0,f.jsx)("div",{className:"space-10px"}),(0,f.jsx)("div",{className:"boader-black"}),(0,f.jsx)("div",{className:"space-20px"}),(0,f.jsx)(p.Z,{className:"mb-0",bordered:!0,children:(0,f.jsx)("tbody",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"font-size-large",children:"\uac80\uc0c9\uc5b4"}),(0,f.jsx)("td",{children:(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(x.Z,{caret:!0,color:"secondary",children:d}),(0,f.jsxs)(u.Z,{children:[(0,f.jsx)(j.Z,{onClick:()=>this.handleDropdownItemSelect("\uc544\uc774\ub514"),children:"\uc544\uc774\ub514"}),(0,f.jsx)(j.Z,{onClick:()=>this.handleDropdownItemSelect("\uc774\ub984"),children:"\uc774\ub984"}),(0,f.jsx)(j.Z,{onClick:()=>this.handleDropdownItemSelect("\uc804\ud654\ubc88\ud638"),children:"\uc804\ud654\ubc88\ud638"})]})]})}),(0,f.jsx)("td",{children:(0,f.jsx)(w.Z,{className:"m-lg-0",children:(0,f.jsx)(D.Z,{type:"text",id:"keyword",placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694",value:s,onChange:e=>this.setState({searchKeyword:e.target.value})})})}),(0,f.jsx)("td",{children:(0,f.jsx)(this.SearchButton,{label:"\uac80\uc0c9"})})]})})}),(0,f.jsx)("div",{className:"space-20px"}),(0,f.jsxs)(h.Z,{children:[(0,f.jsx)(m.Z,{md:"2",className:"ms-auto",children:(0,f.jsx)(y.Z,{className:"font-icon-wrapper",children:(0,f.jsx)(k,{user:this.state.userData})})}),(0,f.jsx)(m.Z,{md:"2",className:"mb-0",children:(0,f.jsx)(r.rU,{to:"../../../../Infomation/Basic/no/null/null",children:(0,f.jsx)(i.Z,{className:"mb-2 me-2 ms-auto",color:"alternate",style:{width:"100%"},children:"\uc804\uccb4 \uc0ac\uc6a9\uc790 \ubcf4\uae30"})})})]}),(0,f.jsxs)(p.Z,{hover:!0,className:"text-center",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"\uc21c\ubc88"}),(0,f.jsx)("th",{children:"ID"}),(0,f.jsx)("th",{children:"\uc774\ub984"}),(0,f.jsx)("th",{children:"\ud578\ub4dc\ud3f0"}),(0,f.jsx)("th",{children:"\uc704\uce58"}),(0,f.jsx)("th",{children:"\uc2a4\ud2b8\ub808\uc2a4"}),(0,f.jsx)("th",{children:"\uc6b0\uc6b8\uc99d"}),(0,f.jsx)("th",{children:"\uc2ec\ubc15\uc774\ubca4\ud2b8\uc5ec\ubd80"}),(0,f.jsx)("th",{children:"\ud608\uc911\uc0b0\uc18c\ud3ec\ud654\ub3c4"}),(0,f.jsx)("th",{children:"\uc2ec\ubc15\uc218"}),(0,f.jsx)("th",{children:"\ud65c\ub3d9\ub7c9"}),(0,f.jsx)("th",{children:"\uad00\ub9ac"})]})}),(0,f.jsx)("tbody",{children:b.map(((e,t)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:e.User_id}),(0,f.jsx)("td",{children:e.Id}),(0,f.jsx)("td",{children:e.Name}),(0,f.jsx)("td",{children:e.Hp_num}),(0,f.jsx)("td",{children:e.Gps_location}),(0,f.jsx)("td",{children:e.stressData}),(0,f.jsx)("td",{children:e.depressData}),(0,f.jsx)("td",{children:e.abnormalHrData}),(0,f.jsx)("td",{children:e.spo2Data}),(0,f.jsx)("td",{children:e.hrData}),(0,f.jsx)("td",{children:e.stepData}),(0,f.jsx)("td",{children:(0,f.jsx)(r.rU,{to:"../../../../../Dashboards/basic/".concat(e.User_id,"/members/").concat(P,"/").concat(d),children:(0,f.jsx)(this.DetailButton,{label:"\ucc60\ud2b8"})})})]},e.User_id)))})]}),(0,f.jsx)("div",{className:"pagination-container text-center",children:(0,f.jsx)(S.Z,{children:Array.from({length:c}).map(((e,s)=>(0,f.jsx)(N.Z,{active:s+1===t,children:(0,f.jsx)(Z.Z,{onClick:()=>v(s+1),children:s+1})},s)))})})]})})})})}}class k extends a.Component{constructor(e){super(e),this.handleDownloadButtonClick=()=>{const{user:e}=this.props,{downloading:t,dayCount:s,monthCount:a}=this.state;!0===t||(this.setState((e=>({downloading:!e.downloading}))),this.setState({download_data1:[]},(()=>{this.searchData(e,s,a)}))),console.log("[handleDownloadButtonClick]downloading : "+t)},this.state={downloadModal:!1,year:0,month:0,day:0,dayCount:0,monthCount:0,downloading:!0,download_data1:[],complete_download:!1},this.toggle=this.toggle.bind(this),console.log("[DownloadModal] !!");const{user:t}=this.props}toggle(){console.log("download modal toggle called!");const{user:e}=this.props,{dayCount:t,monthCount:s}=this.state;this.setState((e=>({downloadModal:!e.downloadModal,download_data1:[]}))),this.searchData(e,t,s),console.log("[toggle]downloadModal: ",this.state.downloadModal)}async searchData(e,t,s){let a=[["Time Stamp","Name","Data Type","Value"]];var n=new Date,l=n.getFullYear(),o=("0"+(n.getMonth()+1)).slice(-2),r=("0"+n.getDate()).slice(-2);console.log("date(today) : "+l+" "+o+" "+r),console.log("chartView1 : "+this.state.chartView1+", chartView2 : "+this.state.chartView2),console.log("monthCount : "+s+", dayCount : "+t);var c=new Date(n);c.setDate(n.getDate()+t+30*s),l=c.getFullYear(),o=("0"+(c.getMonth()+1)).slice(-2),r=("0"+c.getDate()).slice(-2),console.log("date(selected) : "+l+" "+o+" "+r),this.setState({year:l,month:o,day:r}),console.log("searchData! "+l+"\ub144 "+o+"\uc6d4");const i=e[e.length-1].User_id;console.log("download_data1 : "+this.state.download_data1),e.forEach((e=>{Promise.all([d.Z.get("https://test.ssirc.dev/search/Hr/Ts/"+e.User_id+"/?search="+l+"-"+o),d.Z.get("https://test.ssirc.dev/search/Spo2/Ts/"+e.User_id+"/?search="+l+"-"+o)]).then((t=>{let[s,n]=t;s.data.length>0&&s.data.map((t=>{const s=[t.Ts,e.Name,"\uc2ec\ubc15\uc218",t.Hr];a.push(s)})),n.data.length>0&&n.data.map((t=>{const s=[t.Ts,e.Name,"\uc0b0\uc18c\ud3ec\ud654\ub3c4",t.Spo2];a.push(s)})),e.User_id===i&&(console.log("userResponse : "+e.Name),this.setState((e=>({downloading:!e.downloading,complete_download:!e.complete_download,download_data1:a}))),console.log("[searchData]downloading : "+this.state.downloading+" complete_download : "+this.state.complete_download))})).catch((t=>console.error("Error fetching data for user ".concat(e.User_id),t)))}))}toggleChartView2(e){const{user:t}=this.props,{downloading:s}=this.state;var a=0,n=0;!0===s||("-1month"===e?(n=this.state.monthCount-1,a=this.state.dayCount):"+1month"===e&&(n=this.state.monthCount+1,a=this.state.dayCount),this.setState((e=>({downloading:!e.downloading}))),this.setState({dayCount:a,monthCount:n,download_data1:[]},(()=>{this.searchData(t,a,n)}))),console.log("[toggleChartView2]downloading : "+s)}render(){let{year:e,month:t,download_data1:s,complete_download:a,dayCount:n,monthCount:l,file_name:o}=this.state;var r=new Date;return 0===e&&(e=r.getFullYear(),t=("0"+(r.getMonth()+1)).slice(-2)),o=r.getFullYear()+"\ub144"+(r.getMonth()+1)+"\uc6d4"+r.getDate()+"\uc77c-"+r.getHours()+"\uc2dc"+r.getMinutes()+"\ubd84"+r.getSeconds()+"\ucd08",(0,f.jsxs)("span",{className:"d-inline-block",children:[(0,f.jsx)(i.Z,{color:"alternate",md:1,style:{width:"100%"},onClick:this.toggle,children:(0,f.jsx)("p",{children:"\ub2e4\uc6b4\ub85c\ub4dc"})}),(0,f.jsxs)(_.Z,{isOpen:this.state.downloadModal,toggle:this.toggle,className:this.props.className,backdrop:!0,children:[(0,f.jsx)(C.Z,{toggle:this.toggle,children:"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \ub2e4\uc6b4\ub85c\ub4dc "}),(0,f.jsxs)(b.Z,{children:[(0,f.jsx)(h.Z,{className:"mb-2",children:(0,f.jsx)(m.Z,{className:"horizontal-center font-size-large",children:"".concat(e,"\ub144 ").concat(t,"\uc6d4")})}),(0,f.jsxs)(h.Z,{className:"mb-1 horizontal-center",children:[(0,f.jsx)(m.Z,{md:"2",children:(0,f.jsx)(i.Z,{style:{width:"100%"},color:"secondary",onClick:()=>this.toggleChartView2("-1month"),children:(0,f.jsx)("i",{className:"lnr-chevron-left"})})}),(0,f.jsx)(m.Z,{md:"3",className:"vertical-center",children:(0,f.jsx)(i.Z,{style:{width:"100%"},className:"p-1p5",color:"secondary",onClick:()=>this.handleDownloadButtonClick(),children:s.length>0?(0,f.jsx)(c.CSVLink,{data:s,filename:"\uc804\uccb4\uc0ac\uc6a9\uc790-".concat(o),children:(0,f.jsx)("p",{className:"m-0",style:{color:"white"},children:"\ub2e4\uc6b4\ub85c\ub4dc"})}):(0,f.jsx)("p",{className:"m-0",style:{color:"white"},children:"\uc900\ube44 \uc911"})})}),(0,f.jsx)(m.Z,{md:"2",children:(0,f.jsx)(i.Z,{style:{width:"100%"},color:"secondary",onClick:()=>this.toggleChartView2("+1month"),children:(0,f.jsx)("i",{className:"lnr-chevron-right"})})})]})]})]})]})}}const P=(0,n.EN)(v),I=e=>{let{match:t}=e;return(0,f.jsx)(a.Fragment,{children:(0,f.jsx)("div",{className:"app-main",children:(0,f.jsx)("div",{className:"app-main__outer",children:(0,f.jsx)("div",{className:"app-main__inner",children:(0,f.jsx)(n.AW,{path:"".concat(t.url,"/Basic/:returned/:searchKeyword/:selectedItem"),component:P})})})})})}},66070:()=>{}}]);
//# sourceMappingURL=795.1b49ece7.chunk.js.map